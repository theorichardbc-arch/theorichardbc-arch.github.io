<!DOCTYPE html>
<html lang="fr">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Premier développement — Théo Richard</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<style>

body { background: #000; color: #fff; }
a, a:visited, a:active { color: #fff; }
.site-header { background: #000; }
.home-button, .top-bar a { color: #fff; }
.home-button::after, .top-bar a::after { background: #fff; }
.texte-page-corps { color: #fff; }
.texte-retour { color: #fff; border-bottom-color: rgba(255,255,255,0.4); }

/* ── PARTAGE ── */

.partage {
    margin-top: 5rem;
    padding-top: 3rem;
    border-top: 1px solid rgba(255,255,255,0.12);
}

.partage-label,
.commentaires-label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    opacity: 0.4;
    margin-bottom: 1.2rem;
}

.partage-boutons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
}

.partage-btn {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.8rem;
    padding: 0.5rem 1rem;
    border: 1px solid rgba(255,255,255,0.2);
    background: none;
    color: #fff;
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    transition: border-color 0.2s ease, opacity 0.2s ease;
}

.partage-btn:hover { border-color: #fff; }
.partage-btn.copied { opacity: 0.4; }

/* ── COMMENTAIRES ── */

.commentaires {
    margin-top: 5rem;
    padding-top: 3rem;
    border-top: 1px solid rgba(255,255,255,0.12);
    padding-bottom: 10rem;
}

.commentaires-label {
    margin-bottom: 2rem;
}

.commentaire-form {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 560px;
}

.commentaire-form input,
.commentaire-form textarea {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.85rem;
    padding: 0.8rem 1rem;
    border: 1px solid rgba(255,255,255,0.2);
    background: none;
    color: #fff;
    outline: none;
    transition: border-color 0.2s ease;
    resize: vertical;
}

.commentaire-form input:focus,
.commentaire-form textarea:focus {
    border-color: #fff;
}

.commentaire-form input::placeholder,
.commentaire-form textarea::placeholder {
    color: rgba(255,255,255,0.3);
}

.commentaire-form textarea {
    min-height: 120px;
}

.commentaire-submit {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.85rem;
    padding: 0.8rem 2rem;
    border: 1px solid #fff;
    background: none;
    color: #fff;
    cursor: pointer;
    align-self: flex-start;
    transition: background 0.2s ease, color 0.2s ease;
}

.commentaire-submit:hover {
    background: #fff;
    color: #000;
}

.commentaire-merci {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.85rem;
    opacity: 0.5;
    display: none;
}

</style>
</head>

<body>
<div class="page-wrapper">

<header class="site-header">
  <a href="index.html" class="home-button">
    <span class="home-icon">⌂</span> ACCUEIL
  </a>
  <nav class="top-bar">
    <a href="photographie.html">PHOTOGRAPHIE</a>
    <a href="ecriture.html">ÉCRITURE</a>
    <a href="archive.html">ARCHIVE</a>
    <a href="contact.html">CONTACT</a>
  </nav>
</header>

<div class="texte-page">

  <div class="texte-page-header" style="border-bottom-color: rgba(255,255,255,0.15);">
    <p class="texte-page-cat">Carnet de labo</p>
    <h1 class="texte-page-titre">Premier développement</h1>
    <p class="texte-page-date">Octobre 2024</p>
  </div>

  <div class="texte-page-corps">
    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
    </p>
    <p>
      Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    <p>
      Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
    </p>
    <p>
      Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.
    </p>
  </div>

  <a href="ecriture.html" class="texte-retour">← Retour à l'écriture</a>

  <!-- BANDEAU PARTAGE -->
  <div class="partage">
    <p class="partage-label">Partager</p>
    <div class="partage-boutons">
      <a class="partage-btn" id="btnTwitter" href="#" target="_blank">✕ Twitter / X</a>
      <a class="partage-btn" id="btnFacebook" href="#" target="_blank">f Facebook</a>
      <a class="partage-btn" id="btnWhatsapp" href="#" target="_blank">◎ WhatsApp</a>
      <a class="partage-btn" id="btnMail" href="#">✉ Par mail</a>
      <button class="partage-btn" id="btnInstagram">◈ Story Instagram</button>
      <button class="partage-btn" id="btnCopier">⊞ Copier le lien</button>
    </div>
  </div>

  <!-- COMMENTAIRES -->
  <div class="commentaires">
    <p class="commentaires-label">Laisser un commentaire</p>

    <!-- REMPLACEZ l'action par votre URL Formspree : https://formspree.io/f/xxxxxxxx -->
    <form class="commentaire-form" id="commentaireForm"
          action="https://formspree.io/f/mgollrlz"
          method="POST">

      <input type="hidden" name="article" value="Premier développement">
      <input type="text"   name="nom"     placeholder="Votre nom" required>
      <input type="email"  name="email"   placeholder="Votre email (ne sera pas publié)" required>
      <textarea            name="message" placeholder="Votre commentaire..." required></textarea>
      <button type="submit" class="commentaire-submit">Envoyer →</button>

    </form>
    <p class="commentaire-merci" id="commentaireMerci">
      Merci pour votre message, je vous lirai avec attention.
    </p>
  </div>

</div>

<!-- CANVAS STORY (caché) -->
<canvas id="storyCanvas" width="1080" height="1920" style="display:none;"></canvas>

<script>
  const url   = encodeURIComponent(window.location.href);
  const titre = encodeURIComponent(document.title);
  const texte = encodeURIComponent("Je viens de lire cet article de Théo Richard : " + document.title + " — " + window.location.href);

  document.getElementById('btnTwitter').href  = `https://twitter.com/intent/tweet?text=${titre}&url=${url}`;
  document.getElementById('btnFacebook').href = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
  document.getElementById('btnWhatsapp').href = `https://wa.me/?text=${texte}`;
  document.getElementById('btnMail').href     = `mailto:?subject=${titre}&body=${texte}`;

  document.getElementById('btnCopier').addEventListener('click', () => {
    navigator.clipboard.writeText(window.location.href).then(() => {
      const btn = document.getElementById('btnCopier');
      btn.textContent = '⊞ Lien copié !';
      btn.classList.add('copied');
      setTimeout(() => { btn.textContent = '⊞ Copier le lien'; btn.classList.remove('copied'); }, 2000);
    });
  });

  // Formspree : soumission AJAX
  document.getElementById('commentaireForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    const res  = await fetch(form.action, { method: 'POST', body: data, headers: { 'Accept': 'application/json' } });
    if (res.ok) {
      form.style.display = 'none';
      document.getElementById('commentaireMerci').style.display = 'block';
    }
  });

  // ── STORY INSTAGRAM — fond noir ──
  document.getElementById('btnInstagram').addEventListener('click', () => {
    const canvas = document.getElementById('storyCanvas');
    const ctx    = canvas.getContext('2d');
    const W = 1080, H = 1920;

    ctx.fillStyle = '#000';
    ctx.fillRect(0, 0, W, H);

    ctx.strokeStyle = '#fff';
    ctx.lineWidth = 2;
    ctx.beginPath(); ctx.moveTo(80, 230); ctx.lineTo(W - 80, 230); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(80, H - 230); ctx.lineTo(W - 80, H - 230); ctx.stroke();

    ctx.fillStyle = 'rgba(255,255,255,0.35)';
    ctx.font = '400 34px monospace';
    ctx.fillText('CARNET DE LABO', 80, 190);

    const titreTexte = document.querySelector('.texte-page-titre').textContent.trim();
    ctx.fillStyle = '#fff';
    ctx.font = '400 90px sans-serif';

    const mots = titreTexte.split(' ');
    let lignes = [], ligne = '';
    mots.forEach(mot => {
      const test = ligne ? ligne + ' ' + mot : mot;
      if (ctx.measureText(test).width > W - 160 && ligne) { lignes.push(ligne); ligne = mot; }
      else { ligne = test; }
    });
    lignes.push(ligne);

    const lh = 110;
    const startY = Math.round((H - lignes.length * lh) / 2) - 40;
    lignes.forEach((l, i) => ctx.fillText(l, 80, startY + i * lh));

    ctx.fillStyle = 'rgba(255,255,255,0.35)';
    ctx.font = '400 34px monospace';
    ctx.fillText(document.querySelector('.texte-page-date').textContent.trim(), 80, startY + lignes.length * lh + 56);

    ctx.fillStyle = '#fff';
    ctx.font = '400 52px sans-serif';
    ctx.fillText('THÉO RICHARD', 80, H - 270);
    ctx.fillStyle = 'rgba(255,255,255,0.35)';
    ctx.font = '400 30px monospace';
    ctx.fillText(window.location.hostname + window.location.pathname, 80, H - 210);

    const a = document.createElement('a');
    a.download = 'story-' + titreTexte.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '') + '.png';
    a.href = canvas.toDataURL('image/png');
    a.click();
  });
</script>

</body>
</html>
