<!DOCTYPE html>
<html lang="fr">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Premier développement — Théo Richard</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
<style>

body { background: #000; color: #fff; }
a, a:visited, a:active { color: #fff; }
.site-header { background: #000; }
.home-button, .top-bar a { color: #fff; }
.home-button::after, .top-bar a::after { background: #fff; }
.texte-page-corps { color: #fff; }
.texte-retour { color: #fff; border-bottom-color: rgba(255,255,255,0.4); }
.texte-retour:hover { opacity: 0.45; }

/* ── BANDEAU PARTAGE ── */

.partage {
    margin-top: 5rem;
    padding-top: 3rem;
    border-top: 1px solid rgba(255,255,255,0.12);
}

.partage-label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    opacity: 0.4;
    margin-bottom: 1.2rem;
}

.partage-boutons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.6rem;
}

.partage-btn {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.8rem;
    padding: 0.5rem 1rem;
    border: 1px solid rgba(255,255,255,0.2);
    background: none;
    color: #fff;
    cursor: pointer;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    transition: border-color 0.2s ease, opacity 0.2s ease;
}

.partage-btn:hover { border-color: #fff; }
.partage-btn.copied { opacity: 0.4; }

/* ── COMMENTAIRES ── */

.commentaires {
    margin-top: 5rem;
    padding-top: 3rem;
    border-top: 1px solid rgba(255,255,255,0.12);
    padding-bottom: 10rem;
}

.commentaires-label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    opacity: 0.4;
    margin-bottom: 2rem;
}

</style>
</head>

<body>
<div class="page-wrapper">

<header class="site-header">
  <a href="index.html" class="home-button">
    <span class="home-icon">⌂</span> ACCUEIL
  </a>
  <nav class="top-bar">
    <a href="photographie.html">PHOTOGRAPHIE</a>
    <a href="ecriture.html">ÉCRITURE</a>
    <a href="archive.html">ARCHIVE</a>
    <a href="contact.html">CONTACT</a>
  </nav>
</header>

<div class="texte-page">

  <div class="texte-page-header" style="border-bottom-color: rgba(255,255,255,0.15);">
    <p class="texte-page-cat">Carnet de labo</p>
    <h1 class="texte-page-titre">Premier développement</h1>
    <p class="texte-page-date">Octobre 2024</p>
  </div>

  <div class="texte-page-corps">
    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
    </p>
    <p>
      Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
    <p>
      Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.
    </p>
    <p>
      Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet.
    </p>
  </div>

  <a href="ecriture.html" class="texte-retour">← Retour à l'écriture</a>

  <!-- BANDEAU PARTAGE -->
  <div class="partage">
    <p class="partage-label">Partager</p>
    <div class="partage-boutons">
      <a class="partage-btn" id="btnTwitter" href="#" target="_blank">✕ Twitter / X</a>
      <a class="partage-btn" id="btnFacebook" href="#" target="_blank">f Facebook</a>
      <a class="partage-btn" id="btnWhatsapp" href="#" target="_blank">◎ WhatsApp</a>
      <a class="partage-btn" id="btnMail" href="#">✉ Par mail</a>
      <button class="partage-btn" id="btnInstagram">◈ Story Instagram</button>
      <button class="partage-btn" id="btnCopier">⊞ Copier le lien</button>
    </div>
  </div>

  <!-- COMMENTAIRES GISCUS -->
  <div class="commentaires">
    <p class="commentaires-label">Commentaires</p>
    <script src="https://giscus.app/client.js"
      data-repo="theorichardbc-arch/theorichardbc-arch.github.io"
      data-repo-id="R_kgDORNEA5w"
      data-category="Commentaires"
      data-category-id="DIC_kwDORNEA584C22sa"
      data-mapping="pathname"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="top"
      data-theme="dark"
      data-lang="fr"
      data-loading="lazy"
      crossorigin="anonymous"
      async>
    </script>
  </div>

</div>

<!-- CANVAS STORY (caché) -->
<canvas id="storyCanvas" width="1080" height="1920" style="display:none;"></canvas>

<script>
  const url   = encodeURIComponent(window.location.href);
  const titre = encodeURIComponent(document.title);
  const texte = encodeURIComponent("Je viens de lire cet article de Théo Richard : " + document.title + " — " + window.location.href);

  document.getElementById('btnTwitter').href =
    `https://twitter.com/intent/tweet?text=${titre}&url=${url}`;
  document.getElementById('btnFacebook').href =
    `https://www.facebook.com/sharer/sharer.php?u=${url}`;
  document.getElementById('btnWhatsapp').href =
    `https://wa.me/?text=${texte}`;
  document.getElementById('btnMail').href =
    `mailto:?subject=${titre}&body=${texte}`;

  document.getElementById('btnCopier').addEventListener('click', () => {
    navigator.clipboard.writeText(window.location.href).then(() => {
      const btn = document.getElementById('btnCopier');
      btn.textContent = '⊞ Lien copié !';
      btn.classList.add('copied');
      setTimeout(() => { btn.textContent = '⊞ Copier le lien'; btn.classList.remove('copied'); }, 2000);
    });
  });

  // ── STORY INSTAGRAM — fond noir ──
  document.getElementById('btnInstagram').addEventListener('click', () => {
    const canvas = document.getElementById('storyCanvas');
    const ctx    = canvas.getContext('2d');
    const W = 1080, H = 1920;

    // Fond noir
    ctx.fillStyle = '#000000';
    ctx.fillRect(0, 0, W, H);

    // Lignes décoratives
    ctx.strokeStyle = '#ffffff';
    ctx.lineWidth = 2;
    ctx.beginPath(); ctx.moveTo(80, 230); ctx.lineTo(W - 80, 230); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(80, H - 230); ctx.lineTo(W - 80, H - 230); ctx.stroke();

    // Catégorie
    ctx.fillStyle = 'rgba(255,255,255,0.35)';
    ctx.font = '400 34px monospace';
    ctx.fillText('CARNET DE LABO', 80, 190);

    // Titre
    const titreTexte = document.querySelector('.texte-page-titre').textContent.trim();
    ctx.fillStyle = '#ffffff';
    ctx.font = '400 90px sans-serif';

    const mots = titreTexte.split(' ');
    let lignes = [], ligne = '';
    mots.forEach(mot => {
      const test = ligne ? ligne + ' ' + mot : mot;
      if (ctx.measureText(test).width > W - 160 && ligne) {
        lignes.push(ligne); ligne = mot;
      } else { ligne = test; }
    });
    lignes.push(ligne);

    const lh = 110;
    const startY = Math.round((H - lignes.length * lh) / 2) - 40;
    lignes.forEach((l, i) => ctx.fillText(l, 80, startY + i * lh));

    // Date
    const dateTexte = document.querySelector('.texte-page-date').textContent.trim();
    ctx.fillStyle = 'rgba(255,255,255,0.35)';
    ctx.font = '400 34px monospace';
    ctx.fillText(dateTexte, 80, startY + lignes.length * lh + 56);

    // Signature bas
    ctx.fillStyle = '#ffffff';
    ctx.font = '400 52px sans-serif';
    ctx.fillText('THÉO RICHARD', 80, H - 270);

    ctx.fillStyle = 'rgba(255,255,255,0.35)';
    ctx.font = '400 30px monospace';
    ctx.fillText(window.location.hostname + window.location.pathname, 80, H - 210);

    // Téléchargement
    const a = document.createElement('a');
    a.download = 'story-' + titreTexte.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '') + '.png';
    a.href = canvas.toDataURL('image/png');
    a.click();
  });
</script>

</body>
</html>
